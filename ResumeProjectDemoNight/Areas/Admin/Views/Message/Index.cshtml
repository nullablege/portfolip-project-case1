@model List<ResumeProjectDemoNight.Entities.Message>

<div class="bg-white dark:bg-sidebar-dark rounded-3xl p-8 shadow-sm border border-slate-100 dark:border-slate-700">
    <div class="overflow-x-auto">
        <table class="w-full text-left">
            <thead>
                <tr class="border-b border-slate-100 dark:border-slate-700 text-slate-400 uppercase text-xs tracking-wider">
                    <th class="pb-4 font-medium px-4">Durum</th>
                    <th class="pb-4 font-medium px-4">Gönderen</th>
                    <th class="pb-4 font-medium px-4">Email</th>
                    <th class="pb-4 font-medium px-4">Konu</th>
                    <th class="pb-4 font-medium px-4">Mesaj</th>
                    <th class="pb-4 font-medium px-4">Tarih</th>
                    <th class="pb-4 font-medium text-right px-4">İşlemler</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-50 dark:divide-slate-700/50">
                @foreach (var item in Model)
                {
                    <tr class="group hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors @(item.IsRead ? "" : "bg-blue-50 dark:bg-blue-900/10")">
                        <td class="py-6 px-4">
                            @if (item.IsRead)
                            {
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400">
                                    <span class="material-icons-outlined text-xs mr-1">drafts</span> Okundu
                                </span>
                            }
                            else
                            {
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary">
                                    <span class="material-icons-outlined text-xs mr-1">mail</span> Yeni
                                </span>
                            }
                        </td>
                        <td class="py-6 px-4 font-medium text-background-dark dark:text-white">@item.NameSurname</td>
                        <td class="py-6 px-4 text-sm text-slate-500">@item.Email</td>
                        <td class="py-6 px-4 text-sm text-slate-600 dark:text-slate-400">@item.Subject</td>
                        <td class="py-6 px-4 text-sm text-slate-500 max-w-md truncate">@item.MessageDetail</td>
                        <td class="py-6 px-4 text-xs text-slate-400">@item.SendDate.ToString("dd.MM.yyyy")</td>
                        <td class="py-6 px-4 text-right">
                            <div class="flex justify-end gap-3">
                                @if (!item.IsRead)
                                {
                                    <a asp-action="MarkAsRead" asp-route-id="@item.MessageId"
                                       class="text-slate-400 hover:text-primary transition-colors" title="Okundu işaretle">
                                        <span class="material-icons-outlined text-sm">mark_email_read</span>
                                    </a>
                                }
                                <a asp-action="Delete" asp-route-id="@item.MessageId"
                                   class="text-slate-400 hover:text-red-500 transition-colors"
                                   onclick="return confirm('Bu başarısızı silmek istediğinizden emin misiniz?')"
                                   title="Sil">
                                    <span class="material-icons-outlined text-sm">delete</span>
                                </a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    
    @if (!Model.Any())
    {
        <div class="text-center py-12">
            <span class="material-icons-outlined text-6xl text-slate-300 dark:text-slate-700 mb-4">mail_outline</span>
            <p class="text-slate-500 dark:text-slate-400">Henüz mesaj bulunmuyor.</p>
        </div>
    }
</div>
